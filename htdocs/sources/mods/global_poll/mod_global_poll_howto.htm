<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Mod Howto</title>
<meta HTTP-EQUIV="Pragma"  CONTENT="no-cache">
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<meta HTTP-EQUIV="Expires" CONTENT="Mon, 06 May 1996 04:57:00 GMT">

<meta name="purpose" content="Template for howtos of modifications of Invisionboard">
<meta name="date" content="13-August 03">
<meta name="author" content="Peter">
<meta name="email" content="Peter@ibforen.de">
<meta name="credits" content="Thanks to Black Tiger, member at ibforen.de, for optimizing this template">
<meta name="keywords" content="ipb mod template">
<meta name="mod" content="Global Poll">
<meta name="mod_author" content="Koksi">
<meta name="mod_author_email" content="Koksi@ibforen.de">
<meta name="version" content="1.2 b">
<style type='text/css'>
form { display:inline }
TABLE, TR, TD { font-family: Verdana, Tahoma, Arial; font-size: 8.5pt; color: #000000 ; border:5; cellpadding:5; cellspacing:5; }
a:link, a:visited, a:active { text-decoration: underline; color: #000000 }
a:hover { color: #465584 }
.heading { font-size:18pt;line-height:125%; background-color: #62B6FE }
.title1 {font-size:12pt;line-height:100%; background-color: #EEF2F7 }
.searchtext { font-family: Verdana, Tahoma, Arial; font-size: 10pt; color:#000000; background-color: #EEF2F7 }
.normaltext { font-family: Verdana, Tahoma, Arial; font-size: 8pt; color:#000000; background-color: #EEF2F7 }
.postcolor { font-family: Verdana, Tahoma, Arial; font-size: 8pt; color:#000000; background-color: #EEF2F7 }
.table { font-family: Verdana, Tahoma, Arial; font-size: 8pt; color:#000000; background-color: #FFFFFF; }
.code { font-family: Verdana, Tahoma, Arial; font-size: 8pt; color: #333333; background-color: #FAFCFE; border: 1px solid Black; padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px }
.code { font-family: Verdana, Tahoma, Arial; font-size: 8pt; color: #333333; background-color: #FAFCFE; border: 1px solid Black; padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px }
.quote { font-family: Verdana, Tahoma, Arial; font-size: 8pt; color: #333333; background-color: #FAFCFE; border: 1px solid Black; padding-top: 2px; padding-right: 2px; padding-bottom: 2px; padding-left: 2px }
.oldcode { color: red }
.newcode { color: blue }
.newcode_insert { font-style:italic; color: blue }

</style>
</head>

<body class='normaltext'>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;Global Poll&nbsp;&nbsp;1.2 b&nbsp;&nbsp;Invision Power Board  1.2</strong></font>
</div>
<div class='heading'>
<table border='0' cellpadding='5' cellspacing='1' class='table'  width='100%'><tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Description</td>
<td class='normaltext'  width='80%'  valign='top'>Puts a global poll on the forum“ës main page</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Compatibility</td>
<td class='normaltext'  width='80%'  valign='top'>Invision Power Board  1.2</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Category</td>
<td class='normaltext'  width='80%'  valign='top'>Major Mod</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Author</td>
<td class='normaltext'  width='80%'  valign='top'>Koksi</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Author's Email</td>
<td class='normaltext'  width='80%'  valign='top'>Koksi@ibforen.de</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Info File</td>
<td class='normaltext'  width='80%'  valign='top'>sources/mods/global_poll/mod_global_poll_howto.htm</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Version</td>
<td class='normaltext'  width='80%'  valign='top'>1.2 b</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Comment</td>
<td class='normaltext'  width='80%'  valign='top'>Distribution ist not allowed. Download it from ibplanet.com<br>
All changes could be recognized by mod_token<br><br>
This html-howto was created with <b>The ModInstaller</b> by<br>
Peter@ibforen.de,   released 2003-07-07<br>
Creation time 13th August 2003 - 09:48 AM<br><br>
It is not for public use.</td>
</tr>
<tr>
<td class='normaltext'  width='20%'  valign='top'>Mod Token</td>
<td class='normaltext'  width='80%'  valign='top'>mod_global_poll</td>
</tr>
</table>
</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;Content</strong></font>
</div>
<div class='normaltext'>
    <br>1  <a href='#history'>Newest History and Change Logs</a><br>
2  <a href='#changes'>Changes</a><br>
3  <a href='#copy'>Copy</a><br>
4  <a href='#code'>Code</a><br>
5  <a href='#customize'>Customize</a><br>
6  <a href='#comment_mod'>Comment</a><br>
7  <a href='#old_history'>Older Change History and Change Logs</a><br>

</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='history'>1.&nbsp;&nbsp;Newest History and Change Logs</a></strong></font>
</div>
<div class='normaltext'>
    <br><br>
</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='changes'>2.&nbsp;&nbsp;Changes</a></strong></font>
</div>
<div class='heading'>
<table border='0' cellpadding='5' cellspacing='1' class='table'  width='100%'><tr>
<td class='normaltext' width='40%' align='left'><b>Changed file</b></td>
<td class='normaltext' width='60%' align='left'><b>Changed function</b></td>
</tr>
<tr>
<td class='normaltext'  width='40%'  valign='middle'>conf_global.php</td>
<td class='normaltext'  width='60%'  valign='middle'>body</td>
</tr>
<tr>
<td class='normaltext'  width='40%'  valign='middle'>sources/Boards.php</td>
<td class='normaltext'  width='60%'  valign='middle'>Boards(..)</td>
</tr>
<tr>
<td class='normaltext'  width='40%'  valign='middle'>sources/Admin/ad_settings.php</td>
<td class='normaltext'  width='60%'  valign='middle'>post(..)</td>
</tr>
<tr>
<td class='normaltext'  width='40%'  valign='middle'>sources/Admin/ad_settings.php</td>
<td class='normaltext'  width='60%'  valign='middle'>ad_settings(..)</td>
</tr>
</table>
</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='copy'>3.&nbsp;&nbsp;Copy</a></strong></font>
</div>
<div class='normaltext'>
    <br>The Mod Archive is prestructered. Please copy the entire uncompressed archive into the root directory of your board.<br><br>* If the lang directory of this archive contains more than the English language in lang/en then you have to copy the other lang files in their own lang dirs.<br><br>Example:<br>The German lang files resides in lang/de. If your German language resides in lang/2 then you must copy lang/de to lang/2<br><br>* In a similar way you have to copy the skin files in archive's Skin/s1 to the skin dirs of your board.<br>Do not forget to resynchronize the database templates from the php files via ACP &#8658; Skins & Templates &#8658; Manage html templates<br>
</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='code'>4.&nbsp;&nbsp;Code</a></strong></font>
</div>
<div class='title1'>
    <br><br><font size='5'>Step&nbsp;&nbsp;1:</font>&nbsp;&nbsp;Open <b>conf_global.php</b>
</div>
<div class='searchtext'>
    <br><img src='doc/images/bullet.gif' />&nbsp;&nbsp;<i>Find</i> 
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='oldcode'><br>$INFO[&#039;post_titlechange&#039;]</span>

    </td></tr>
</table></div>
<div class='searchtext'>
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Insert above</i> <span class='newcode_insert'>the blue code</span>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='newcode'><br><br><br>
//--&nbsp;mod_global_poll&nbsp;begin<br>
$INFO[&#039;global_poll&#039;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&#039;0&#039;;<br>
//--&nbsp;mod_global_poll&nbsp;end<br><br>
</span>
<span class='oldcode'><br>$INFO[&#039;post_titlechange&#039;]</span>

    </td></tr>
</table></div>
<div class='title1'>
    <br><br><font size='5'>Step&nbsp;&nbsp;2:</font>&nbsp;&nbsp;Open <b>sources/Boards.php</b>
</div>
<div class='searchtext'>
    <br><img src='doc/images/bullet.gif' />&nbsp;&nbsp;<i>Find in</i> <b>function&nbsp;Boards(..)</b>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='oldcode'><br>$this-&gt;process_all_cats();</span>

    </td></tr>
</table></div>
<div class='searchtext'>
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Insert below</i> <span class='newcode_insert'>the blue code</span>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='oldcode'><br>$this-&gt;process_all_cats();</span>
<span class='newcode'><br><br><br>
//--&nbsp;mod_global_poll&nbsp;begin<br>
if&nbsp;(file_exists(ROOT_PATH.&quot;sources/mods/global_poll/mod_global_poll_func.php&quot;))&nbsp;<br>
{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;ROOT_PATH.&quot;sources/mods/global_poll/mod_global_poll_func.php&quot;;<br>
}else{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&quot;Could&nbsp;not&nbsp;call&nbsp;required&nbsp;function&nbsp;from&nbsp;file&nbsp;&#039;sources/mods/global_poll/mod_global_poll_func.php&#039;&lt;br&gt;Does&nbsp;it&nbsp;exist?&quot;);<br>
}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
$global_poll&nbsp;=&nbsp;new&nbsp;global_poll;<br>
$this-&gt;output&nbsp;.=&nbsp;$global_poll-&gt;getOutput();&nbsp;&nbsp;&nbsp;&nbsp;<br>
//--&nbsp;mod_global_poll&nbsp;end<br><br>
</span>

    </td></tr>
</table></div>
<div class='title1'>
    <br><br><font size='5'>Step&nbsp;&nbsp;3:</font>&nbsp;&nbsp;Open <b>sources/Admin/ad_settings.php</b>
</div>
<div class='searchtext'>
    <br><img src='doc/images/bullet.gif' />&nbsp;&nbsp;<font size='5'>A.</font>&nbsp;<i>Find in</i> <b>function&nbsp;post(..)</b>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='oldcode'><br>$ADMIN-&gt;html&nbsp;.=&nbsp;$SKIN-&gt;add_td_basic(&nbsp;&#039;Polls&#039;,&nbsp;&#039;left&#039;,&nbsp;&#039;catrow2&#039;&nbsp;);</span>

    </td></tr>
</table></div>
<div class='searchtext'>
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Insert above</i> <span class='newcode_insert'>the blue code</span>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='newcode'><br><br><br>
//--&nbsp;mod_global_poll&nbsp;begin<br>
if&nbsp;(file_exists(ROOT_PATH.&quot;sources/mods/global_poll/mod_global_poll_adm.php&quot;))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;ROOT_PATH.&quot;sources/mods/global_poll/mod_global_poll_adm.php&quot;;<br>
&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&quot;Could&nbsp;not&nbsp;call&nbsp;required&nbsp;function&nbsp;from&nbsp;file&nbsp;&#039;sources/mods/global_poll/mod_global_poll_adm.php&#039;&lt;br&gt;Does&nbsp;it&nbsp;exist?&quot;);<br>
&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;$adminGlobalPoll&nbsp;=&nbsp;new&nbsp;AdminGlobalPoll;<br>
&nbsp;&nbsp;&nbsp;$adminGlobalPoll-&gt;ad_settings();<br>
//--&nbsp;mod_global_poll&nbsp;end<br><br>
</span>
<span class='oldcode'><br>$ADMIN-&gt;html&nbsp;.=&nbsp;$SKIN-&gt;add_td_basic(&nbsp;&#039;Polls&#039;,&nbsp;&#039;left&#039;,&nbsp;&#039;catrow2&#039;&nbsp;);</span>

    </td></tr>
</table></div>
<div class='searchtext'>
    <br><img src='doc/images/bullet.gif' />&nbsp;&nbsp;<font size='5'>B.</font>&nbsp;<i>Find in</i> <b>function&nbsp;ad_settings(..)</b>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='oldcode'><br>case&nbsp;&#039;dopost&#039;:</span>

    </td></tr>
</table></div>
<div class='searchtext'>
    <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Insert below</i> <span class='newcode_insert'>the blue code</span>
</div>
<div class='normaltext'><table class='normaltext' border='0' align='center' width='95%' cellpadding='3' cellspacing='1'>
    <tr><td class='code'>
    <span class='oldcode'><br>case&nbsp;&#039;dopost&#039;:</span>
<span class='newcode'><br><br><br>
//--&nbsp;mod_global_poll&nbsp;begin<br>
if&nbsp;(file_exists(ROOT_PATH.&quot;sources/mods/global_poll/mod_global_poll_adm.php&quot;))&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;require&nbsp;ROOT_PATH.&quot;sources/mods/global_poll/mod_global_poll_adm.php&quot;;<br>
&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;die(&quot;Could&nbsp;not&nbsp;call&nbsp;required&nbsp;function&nbsp;from&nbsp;file&nbsp;&#039;sources/mods/global_poll/mod_global_poll_adm.php&#039;&lt;br&gt;Does&nbsp;it&nbsp;exist?&quot;);<br>
&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;$adminGlobalPoll&nbsp;=&nbsp;new&nbsp;AdminGlobalPoll;<br>
&nbsp;&nbsp;&nbsp;$adminGlobalPoll-&gt;save_config();<br>
//--&nbsp;mod_global_poll&nbsp;end<br><br>
</span>

    </td></tr>
</table></div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='customize'>5.&nbsp;&nbsp;Customize</a></strong></font>
</div>
<div class='normaltext'>
    <br>Go to acp &gt;&gt; System Settings &gt;&gt; Topics, Posts &amp; Polls &gt;&gt; Global Poll Mod<br>Select a poll to use it as the global poll.<br>
</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='comment_mod'>6.&nbsp;&nbsp;Comment</a></strong></font>
</div>
<div class='normaltext'>
    <br><br>
</div>
<br>
<div class="heading">
  <font size="3" face="Arial, Helvetica, sans-serif"><strong>&nbsp;<a name='old_history'>7.&nbsp;&nbsp;Older Change History and Change Logs</a></strong></font>
</div>
<div class='normaltext'>
    <br><br>
</div>
</body>
</html>